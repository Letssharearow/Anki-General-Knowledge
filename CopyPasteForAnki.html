<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<!--paste the html inside the div with the id="PLACE_HTML_INSIDE_ME" -->
<!--paste the javascript after these characters "function () {/*" -->
<!--paste the styling in "Stil" or "Style" (other page of anki) -->

<div id="PLACE_HTML_INSIDE_ME">
  <div id="mainElement">

    <h1 id="question">{{ question }}</h1>
    <div class="answer">
      <i style="display: none">a</i>
      <div>{{ a }}</div>
    </div>
    <div class="answer">
      <i style="display: none">b</i>
      <div>{{ b }}</div>
    </div>
    <div class="answer">
      <i style="display: none">c</i>
      <div>{{ c }}</div>
    </div>
    <div class="answer">
      <i style="display: none">d</i>
      <div>{{ d }}</div>
    </div>

    <i id="tags" style="display: none">{{Tags}}</i>

    <input id="solution" type="hidden" value="{{solution}}">
  </div>
</div>

<script>
  var code = (function () {/*
  let answerElements = document.getElementsByClassName("answer");

    function randomizeElements(elements){
        let parentNode = elements[0].parentNode;
        var arr = Array.prototype.slice.call( elements )
        const shuffledArray = arr.sort((a, b) => 0.5 - Math.random());
        console.log(shuffledArray);
        for (let element of shuffledArray){
            parentNode.appendChild(element);
        }
    }
    randomizeElements(answerElements);

    const questionElement = document.getElementById("question");
    const mainElement = document.getElementById("mainElement");
    const solutionElement = document.getElementById("solution");
    const solution = solutionElement.value;

    const tags = document.getElementById("tags").textContent;
    let tagsArray = tags.split(" ");

    //tags examples:
    // #answerBackground_red #answerFont_blue #background_red #questionFont_blue #solutionBackground_green #solutionFont_red #wrongBackground_red #wrongFont_yellow

    const colorTagNamesEnum = {
        answerBackground: "answerBackground",
        answerFont: "answerFont",
        background: "background",
        questionFont: "questionFont",
        solutionBackground: "solutionBackground",
        solutionFont: "solutionFont",
        wrongBackground: "wrongBackground",
        wrongFont: "wrongFont",
    }

    let correctAnswerBackgroundColor = "green";
    let correctAnswerFontColor = "white";

    let wrongAnswerBackgroundColor = "red";
    let wrongAnswerFontColor = "white";

    var elementToColor = new Map;

    for(let tag of tagsArray){
        if(tag.startsWith("#")){
            let colorStartIndex = tag.indexOf("_");
            let key = tag.substring(1, colorStartIndex);
            let value = tag.substring(colorStartIndex + 1);
            elementToColor.set(key, value);
        }
    }

    console.log(elementToColor);

    let iterableIterator = elementToColor.keys();
    for(let tag of iterableIterator){
        let color = elementToColor.get(tag);
        if(tag === colorTagNamesEnum.answerBackground){
            for (const elementsByNameElement of answerElements) {
                setBackgroundColor(elementsByNameElement, color);
            }
        }
        else if(tag === colorTagNamesEnum.answerFont){
            for (const elementsByNameElement of answerElements) {
                setFontColor(elementsByNameElement, color);
            }
        }
        else if(tag === colorTagNamesEnum.background){
            setBackgroundColor(mainElement, color);
        }
        else if(tag === colorTagNamesEnum.questionFont){
            setFontColor(questionElement, color);
        }
        else if(tag === colorTagNamesEnum.solutionFont){
            correctAnswerFontColor = color;
        }
        else if(tag === colorTagNamesEnum.solutionBackground){
            correctAnswerBackgroundColor = color;
        }
        else if(tag === colorTagNamesEnum.wrongBackground){
            wrongAnswerBackgroundColor = color;
        }
        else if(tag === colorTagNamesEnum.wrongFont){
            wrongAnswerFontColor = color
        }
    }

    let userAnswer = "";

    for (const elementsByNameElement of answerElements) {
        elementsByNameElement.onclick = e => {
            userAnswer = elementsByNameElement.querySelector("i").textContent.slice(0, 1);
            if (correctAnswer()) {
                setBackgroundColor(elementsByNameElement, correctAnswerBackgroundColor);
                setFontColor(elementsByNameElement, correctAnswerFontColor);
            } else {
                setBackgroundColor(elementsByNameElement, wrongAnswerBackgroundColor);
                setFontColor(elementsByNameElement, wrongAnswerFontColor);
            }
        }
    }

    function correctAnswer() {
        return solution.toUpperCase() === userAnswer.toUpperCase();
    }

    function setBackgroundColor(element, color) {
        element.style.backgroundColor = color;
    }

    function setFontColor(element, color) {
        element.style.color = color;
    }

    function showSolution() {
        solutionElement.type = "submit";
    }
*/}).toString();
  code = code.slice(16, code.length - 4);
  eval(new DOMParser().parseFromString(code, "text/html").documentElement.textContent);
</script>
<style>
  .card {
    font-family: arial;
    font-size: 20px;
    text-align: center;
    color: black;
    background-color: white;
  }

  .answer {
    background-color: #04084b;
    border: #000000 1px solid;
    margin-bottom: 3px;
    padding: 2px;
    width: 100%;
  }

  #mainElement {
    background-color: #250324;
    padding: 10px;
    color: #bde5f3;
    margin: auto;
  }
</style>
</body>
</html>